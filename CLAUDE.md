# チャットボットプロジェクト

## プロジェクト概要
Next.js + PostgreSQL + Ollama(ローカルLLM)を使用した、キャラクター表現型チャットツール

### 主な機能
1. **ニュース連動キャラクター表現**
   - 毎朝ニュース情報を自動取得
   - 特定のイラストキャラクターがニュース内容を参照し、かわいいポーズで表現

2. **ユーザー投稿まとめ機能**
   - お気に入りのイラストキャラクターを設定可能
   - 特定ユーザーの投稿内容をキャラクターがまとめて体現

### 既存チャットツールとの差別化
- ローカルLLMによる画像生成でセキュリティを確保
- キャラクター表現による情報の可視化・親しみやすさ

## 技術スタック

### フロントエンド
- **Next.js**: UIフレームワーク
- **デザインコンセプト**: 青を基調としたシンプルなUI

### バックエンド
- **PostgreSQL**: データベース
- **Ollama**: ローカルLLM実行環境
  - セキュアな画像生成
  - テキスト処理・要約

### 開発環境
- **Docker**: 仮想環境管理
  - Next.js アプリケーションコンテナ
  - PostgreSQL コンテナ
  - Ollama コンテナ
- **notebook/**: Ollama デバッグ・テスト用ディレクトリ
  - Jupyter Notebook等を使用
  - LLMモデルの動作確認
  - プロンプトエンジニアリング

## セキュリティ方針
- すべてのLLM処理をローカル実行
- 外部APIへのデータ送信なし
- ユーザーデータの保護

## ディレクトリ構成（予定）
```
chat-bot/
├── notebook/           # Ollama デバッグ・テスト
├── process/            # Claude Code実行ログ（ブランチごと）※gitignore対象
│   ├── feature-xxx.md # 各ブランチの実行内容
│   └── ...
├── src/
│   ├── app/           # Next.js App Router
│   ├── components/    # UIコンポーネント
│   ├── lib/           # ユーティリティ・DB接続
│   └── services/      # LLM連携・ニュース取得
├── public/            # 静的ファイル・イラスト素材
├── prisma/            # DB スキーマ
├── docker-compose.yml # Docker構成
├── Dockerfile         # Next.jsコンテナ
└── CLAUDE.md          # このファイル
```

## 実装フェーズ

### Phase 1: 基盤構築
- [ ] Next.js プロジェクトセットアップ
- [ ] PostgreSQL データベース設計
- [ ] Ollama ローカル環境構築
- [ ] notebook/ でOllama動作確認

### Phase 2: コア機能実装
- [ ] ニュース取得API実装
- [ ] LLMによるニュース要約処理
- [ ] キャラクター画像生成ロジック
- [ ] ユーザー投稿保存・取得機能

### Phase 3: UI実装
- [ ] 青基調のデザインシステム構築
- [ ] チャットUI実装
- [ ] キャラクター表示コンポーネント
- [ ] レスポンシブ対応

### Phase 4: 統合・テスト
- [ ] フロント・バックエンド統合
- [ ] E2Eテスト
- [ ] パフォーマンス最適化

## 開発メモ
- Ollamaモデル候補: llama3, llama3.2-vision (画像生成用)
- ニュースAPI候補: NewsAPI, RSS等
- 定期実行: Next.js API Routes + cron or Vercel Cron
- Docker環境で開発・本番環境を統一

## Claude Code 実行ログ管理
Claude Codeが実行した内容は、`process/` ディレクトリにブランチごとに記録されます。

### ログ記録方針
- 各ブランチの実装内容を `process/[ブランチ名].md` に記載
- 実行したコマンド、作成したファイル、変更内容を詳細に記録
- 後から見直した際に実装の流れが追えるようにする
- エラーや試行錯誤の過程も含めて記録
- **注意**: `process/` ディレクトリは `.gitignore` に含まれ、Gitには含まれません
